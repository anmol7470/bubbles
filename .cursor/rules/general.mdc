---
alwaysApply: true
---

Project structure:
apps/client -> nextjs client app
apps/ws -> bun/socket.io websocket server

Rules:
Use latest library features.
Use pnpm as package manager.
Use shadcn/ui as component library. Install components using `pnpm dlx shadcn@latest add <component>`.
Use `useMutation` for all mutations and `useQuery` for all queries.
Mutations are written in `lib/db/mutations.ts` and queries are written in `lib/db/queries.ts`.
Use Image from `next/image` for all images.
Use Link from `next/link` for app links and `<a>` for external links.
Break down complex components into smaller components.
Use kebab-case naming convention for file names.
Use Drizzle ORM's relational api for database queries.
Generate migrations using `pnpm db:generate` and apply them using `pnpm db:migrate` inside the `apps/client` directory.
Use Drizzle's transactions for multiple database operations together.
